<!--<div class="quick-order">
  {% if section.settings.title != blank %}
    <h2>{{ section.settings.title }}</h2>
  {% endif %}
  <p>Quick order content goes here...</p>
</div>-->

{% if customer %}
  <!-- Customer is logged in, show the quick order form -->
  <div class="quick-order-list-wrapper">
    {% render 'quick-order-list' %}
  </div>
{% else %}
  <!-- Customer is not logged in -->
  <div class="quick-order-list-wrapper" id="quick-order-preview">
    {% comment %} Show the actual Quick Order interface ONLY for theme editor preview {% endcomment %}
    {% render 'quick-order-list' %}
  </div>

  <script>
    // Check if customer is logged in on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Only redirect if not in theme editor/preview mode
      if (!window.Shopify?.designMode && !window.location.search.includes('preview_theme_id')) {
        // Immediate redirect to Shopify login without any delay or toast
        window.location.href = '/account/login?return_url=' + encodeURIComponent(window.location.pathname);
      }
    });
  </script>
{% endif %}

{% schema %}
{
  "name": "Quick Order Link",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Quick Order Form"
    },
    {
      "type": "text",
      "id": "link_label",
      "label": "Link Text",
      "default": "Quick Order"
    }
  ]
}
{% endschema %}

